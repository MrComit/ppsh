#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

#include "make_const_nonconst.h"
#include "levels/wf/header.h"

const LevelScript level_wf_entry[] = {
	INIT_LEVEL(),
	LOAD_MIO0(0x07, _wf_segment_7SegmentRomStart, _wf_segment_7SegmentRomEnd), 
	LOAD_MIO0(0x0A, _cloud_floor_skybox_mio0SegmentRomStart, _cloud_floor_skybox_mio0SegmentRomEnd), 
	LOAD_MIO0_TEXTURE(0x09, _grass_mio0SegmentRomStart, _grass_mio0SegmentRomEnd), 
	LOAD_MIO0(0x05, _group6_mio0SegmentRomStart, _group6_mio0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group6_geoSegmentRomStart, _group6_geoSegmentRomEnd), 
	LOAD_MIO0(0x06, _group14_mio0SegmentRomStart, _group14_mio0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group14_geoSegmentRomStart, _group14_geoSegmentRomEnd), 
	LOAD_MIO0(0x08, _common0_mio0SegmentRomStart, _common0_mio0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_7), 
	JUMP_LINK(script_func_global_15), //JUMP_LINK(script_func_local_2), //        JUMP_LINK(script_func_local_2),
	LOAD_MODEL_FROM_GEO(MODEL_WF_BUBBLY_TREE, bubbly_tree_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_CASTLE_GROUNDS_WARP_PIPE, warp_pipe_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_CANYON_ELEVATOR, canyon_elevator_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_CANYON_BUTTON, canyon_button_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_WRENCH, mole_wrench_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPLAT, quicksand_platforming_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_FLOATING_ROCK, floating_rock_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_ROCK_DOOR, rock_door_geo), //AREA(/*index*/ 1, wf_geo_000BF8),

	AREA(1, wf_area_1),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x1A, LEVEL_WF, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF1, LEVEL_WF, 0x01, 0x1A, WARP_NO_CHECKPOINT),
		INSTANT_WARP(0x00, 0x02, 0, 0, 0),
		WARP_NODE(0x1F, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		INSTANT_WARP(0x01, 0x03, 0, 0, 0),
		OBJECT(MODEL_MONTY_MOLE, -19647, -539, 2770, 0, -151, 0, 0x02000000, bhvMoleNpc),
		OBJECT(MODEL_MONTY_MOLE, -20353, -539, 2883, 0, -151, 0, 0x02000000, bhvMoleNpc),
		OBJECT(MODEL_CANYON_BUTTON, -6047, 0, -24598, 0, 0, 0, 0x00000000, bhvCanyonButton),
		OBJECT(MODEL_CANYON_BUTTON, 18689, 0, -13499, 0, 0, 0, 0x00020000, bhvBlueCanyonButton),
		OBJECT(MODEL_CANYON_ELEVATOR, -13995, 0, 3616, 0, 0, 0, 0x00000000, bhvCanyonElevator),
		OBJECT(MODEL_CANYON_ELEVATOR, -276, 1965, -3789, 0, -41, 0, 0x00010000, bhvCanyonElevator),
		OBJECT(MODEL_CANYON_ELEVATOR, 2608, 1965, 8124, 0, 97, 0, 0x00010000, bhvCanyonElevator),
		OBJECT(MODEL_NONE, -12488, 680, 12345, 0, 169, 0, 0x001A0000, bhvWarps84),
		OBJECT(MODEL_FLOATING_ROCK, 17908, -508, -2335, 0, 0, 0, 0x00800000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 19172, -508, -3174, 0, -49, 0, 0x00400000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 17771, -508, -4189, 0, -96, 0, 0x00100000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 18709, -508, -5249, 0, 93, 0, 0x00C00000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 11203, -508, -2393, 0, -71, 0, 0x00800000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 12801, -508, -930, 0, -121, 0, 0x00400000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 12669, -508, -2577, 0, -167, 0, 0x00100000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 10391, 1460, 13626, 0, -155, 0, 0x00400000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 9275, 1691, 15259, 0, -118, 0, 0x00900000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 8088, 1843, 15500, 0, -161, 0, 0x00E00000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 6076, 1483, 12959, 0, -36, 0, 0x00400000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 6159, 1765, 15243, 0, 0, 0, 0x00900000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, -20779, -508, -4437, 0, -71, 0, 0x00800000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 9589, 1460, 9890, 0, 159, 0, 0x00400000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 10749, 1460, 10597, 0, 109, 0, 0x00400000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 15729, 1460, 13905, 0, -128, 0, 0x00400000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 15904, 1672, 15195, 0, -163, 0, 0x00900000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 16008, 1599, 16373, 0, 140, 0, 0x00000000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 11787, 1599, 17808, 0, 171, 0, 0x00200000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 14874, 1599, 17669, 0, 65, 0, 0x00A00000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 6614, 1624, 14042, 0, -47, 0, 0x00000000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 9257, 1536, 13967, 0, -140, 0, 0x00000000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, -21016, -846, -3210, 0, -100, 0, 0x00300000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, -20567, -985, -2045, 0, -160, 0, 0x00800000, bhvFloatRock),
		OBJECT(MODEL_NONE, -12488, 680, 12345, 0, -11, 0, 0x000A0000, bhvWarps78),
		OBJECT(MODEL_MONTY_MOLE, -12717, 0, 9110, 0, 0, 0, 0x00000000, bhvMoleNpc),
		OBJECT(MODEL_MONTY_MOLE, -8075, 0, 8956, 0, 86, 0, 0x00000000, bhvMoleNpc),
		OBJECT(MODEL_SPLAT, 9416, -180, -9309, 0, 0, 0, 0x073A0000, bhvSPlat),
		OBJECT(MODEL_SPLAT, 9416, -290, -9309, 0, 0, 0, 0x04300000, bhvSPlat),
		OBJECT(MODEL_SPLAT, 9416, -400, -9309, 0, 0, 0, 0x09260000, bhvSPlat),
		OBJECT(MODEL_SPLAT, 9416, -510, -9309, 0, 0, 0, 0x051C0000, bhvSPlat),
		OBJECT(MODEL_SPLAT, 9416, -620, -9309, 0, 0, 0, 0x0A120000, bhvSPlat),
		OBJECT(MODEL_CANYON_BUTTON, 10713, 1965, 17679, 0, 0, 0, 0x00000000, bhvRedCanyonButton),
		OBJECT(MODEL_CANYON_BUTTON, 15933, 1965, 17595, 0, 0, 0, 0x00000000, bhvRedCanyonButton),
		OBJECT(MODEL_CANYON_BUTTON, 15440, 1965, 12899, 0, 22, 0, 0x00000000, bhvRedCanyonButton),
		OBJECT(MODEL_CANYON_BUTTON, 11282, 1993, 14615, 0, -40, 0, 0x00000000, bhvRedCanyonButton),
		OBJECT(MODEL_CANYON_BUTTON, 6982, 2185, 15972, 0, 45, 0, 0x00000000, bhvRedCanyonButton),
		OBJECT(MODEL_NONE, 14738, 2043, 8725, 0, -70, 0, 0x00000000, bhvCloud),
		OBJECT(MODEL_NONE, 15629, 2043, 11117, 0, -70, 0, 0x00000000, bhvCloud),
		OBJECT(MODEL_NONE, 11601, 2141, 13010, 0, -70, 0, 0x01000000, bhvCloud),
		OBJECT(MODEL_NONE, 11542, 2141, 16985, 0, -70, 0, 0x01000000, bhvCloud),
		OBJECT(MODEL_NONE, 12004, 2141, 14294, 0, -70, 0, 0x01000000, bhvCloud),
		OBJECT(MODEL_NONE, 15047, 2142, 15634, 0, 94, 0, 0x00000000, bhvCloud),
		OBJECT(MODEL_RED_COIN, 5992, 962, -12321, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -17795, 1965, 1760, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -15278, 681, 9252, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -5135, 1966, 6440, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 6136, 2325, 1489, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 209, 1972, 5214, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 5549, 1965, 4067, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -11486, 5894, -2363, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_ROCK_DOOR, 15405, 1214, 4035, 0, 0, 0, 0x00000000, bhvRockDoor),
		OBJECT(MODEL_STAR, -2817, 8158, -10182, 0, 0, 0, 0x00000000, bhvStar),
		OBJECT(MODEL_NONE, 9416, -273, -9309, 0, 0, 0, 0x00000000, bhvStarPieceStar),
		OBJECT(MODEL_NONE, 5554, 2265, 5141, 0, 0, 0, 0x00000000, bhvHiddenRedCoinStar),
		OBJECT(MODEL_NONE, -9186, 640, 9850, 0, 0, 0, 0x00000000, bhvWrenchStar),
		OBJECT(MODEL_STAR_PIECE_SWITCH, 9416, -573, -9309, 0, 0, 0, 0x0B020000, bhvStarPieceSwitch),
		OBJECT(MODEL_CASTLE_GROUNDS_WARP_PIPE, -1370, 1965, 13019, 0, 173, 0, 0x001F0100, bhvWarpPipe),
		OBJECT(MODEL_WRENCH, -10698, 0, 6271, 0, 0, 0, 0x00000000, bhvWrenchCollect),
		OBJECT(MODEL_WRENCH, -15504, 0, 7262, 0, 0, 0, 0x00000000, bhvWrenchCollect),
		OBJECT(MODEL_WRENCH, -13722, 0, 11173, 0, 17, 0, 0x00000000, bhvWrenchCollect),
		OBJECT(MODEL_WRENCH, -8008, 261, 3653, 0, 0, 0, 0x00000000, bhvWrenchCollect),
		OBJECT(MODEL_WRENCH, -8271, 1021, 13022, 0, 0, 0, 0x00000000, bhvWrenchCollect),
		TERRAIN(wf_area_1_collision),
		ROOMS(wf_area_1_collision_rooms),
		MACRO_OBJECTS(wf_area_1_Area1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_LEVEL_HOT),
		TERRAIN_TYPE(TERRAIN_SAND),
	END_AREA(),

	AREA(2, wf_area_2),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		INSTANT_WARP(0, 0x01, 0, 0, 0),
		WARP_NODE(0x1A, LEVEL_WF, 0x01, 0x1F, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_MONTY_MOLE, 12557, 0, 8152, 0, 0, 0, 0x00000000, bhvBigBully),
		OBJECT(MODEL_FLOATING_ROCK, -2027, -530, 3472, 0, -71, 0, 0x00800000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, -833, -530, 3808, 0, -103, 0, 0x00C00000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, -90, -530, 2665, 0, -70, 0, 0x00200000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 1483, -860, -14225, 0, -3, 0, 0x00800000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 2236, -860, -15210, 0, -35, 0, 0x00000000, bhvFloatRock),
		OBJECT(MODEL_FLOATING_ROCK, 2917, -860, -16185, 0, -26, 0, 0x00800000, bhvFloatRock),
		OBJECT(MODEL_RED_COIN, 3651, -18, -250, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 2916, -142, -16158, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_NONE, -16608, 0, 5978, 0, -15, 0, 0x00000000, bhvSignOnWall),
		TERRAIN(wf_area_2_collision),
		ROOMS(wf_area_2_collision_rooms),
		MACRO_OBJECTS(wf_area_2_Area2_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_LEVEL_HOT),
		TERRAIN_TYPE(TERRAIN_SAND),
	END_AREA(),

	AREA(3, wf_area_3),
		WARP_NODE(0x1A, LEVEL_WF, 0x01, 0x1F, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_MONTY_MOLE, 2990, -74, 14603, 0, 42, 0, 0x01000000, bhvMoleNpc),
		OBJECT(MODEL_CASTLE_GROUNDS_WARP_PIPE, 3357, -74, 14032, 0, -180, 0, 0x001A0000, bhvWarpPipe),
		TERRAIN(wf_area_3_collision),
		ROOMS(wf_area_3_collision_rooms),
		MACRO_OBJECTS(wf_area_3_Area3_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_LEVEL_HOT),
		TERRAIN_TYPE(TERRAIN_STONE),
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(1, 0, 0, 0, 0),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
